<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Trang chủ</title>
    <th:block th:replace="~{base :: styles}"></th:block>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
    <div th:replace="~{base :: sidebar}"></div>

    <!-- Page content -->
    <div class="content">
        <div th:fragment="base" class="container mt-3">
            <div class="row text-center">
                <div class="col-md-4 mb-3 bg-yellow">
                    <a th:href="@{'/admin/stats/current-inventory'}" class="card p-3 mb-3 text-dark text-decoration-none shadow bg-warning">
                        <h4 class="card-title" th:text="${list_current != null ? list_current.size() : '0' }"></h4>
                        <h5 class="card-text">Sản phẩm sắp hết hàng</h5>
                        <p class="card-text text-white">Xem chi tiết</p>

                    </a>
                </div>
                <div class="col-md-4 mb-3">
                    <a th:href="@{'/admin/stats/expiring-inventory'}" class="card p-3 mb-3 text-dark text-decoration-none shadow bg-primary">
                        <h4 class="card-title" th:text="${list_expiring != null ? list_expiring.size() : '0' }"></h4>
                        <h5 class="card-text">Sản phẩm sắp hết hạn sử dụng</h5>
                        <p class="card-text text-white">Xem chi tiết</p>

                    </a>
                </div>
                <div class="col-md-4 mb-3">
                    <a th:href="@{'/admin/stats/expired-inventory'}" class="card p-3 mb-3 text-dark text-decoration-none shadow bg-danger">
                        <h4 class="card-title" th:text="${list_expired != null ? list_expired.size() : '0' }"></h4>
                        <h5 class="card-text">Sản phẩm đã hết hạn sử dụng</h5>
                        <p class="card-text text-white">Xem chi tiết</p>

                    </a>
                </div>
            </div>



        </div>
        <!--Vẽ biểu đồ đánh giá nhà cung cấp-->
        <div class="container mt-4">
            <h2 class="mb-3">Báo cáo hiệu suất nhà cung cấp</h2>
            <canvas id="performanceChart" width="800" height="400"></canvas>
        </div>

        <script th:inline="javascript">
            const labels = [[${names}]];
            const data = {
            labels: labels,
                    datasets: [
                    {
                    label: 'Đơn nhập',
                            data: [[${totalReceipts}]],
                            backgroundColor: 'rgba(54, 162, 235, 0.6)'
                    },
                    {
                    label: 'Giá trung bình',
                            data: [[${avgPrice}]],
                            backgroundColor: 'rgba(255, 206, 86, 0.6)'
                    },
                    {
                    label: 'Chất lượng',
                            data: [[${avgQuality}]],
                            backgroundColor: 'rgba(75, 192, 192, 0.6)'
                    },
                    {
                    label: 'Hỗ trợ',
                            data: [[${avgSupport}]],
                            backgroundColor: 'rgba(153, 102, 255, 0.6)'
                    }
                    ]
            };
            const config = {
            type: 'bar',
                    data: data,
                    options: {
                    responsive: true,
                            scales: {
                            y: {
                            beginAtZero: true
                            }
                            }
                    }
            };
            new Chart(document.getElementById('performanceChart'), config);
        </script>

    </div>




</body>
</html>

